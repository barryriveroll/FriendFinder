<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Friend Finder â€¢ Survey</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
      integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS"
      crossorigin="anonymous"
    />
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="jumbotron">
        <h1 class="display-4">Friend Finder</h1>
        <p class="lead">
          Answer 10 simple questions to find the friend you match with the best.
        </p>
        <hr class="my-4" />
        <a class="btn btn-primary btn-lg" href="/" role="button">Go Home</a>
      </div>
      <!-- QUESTION 1 -->
      <div class="row pt-4">
        <div class="col-md-12">
          <h2 id="question1heading">Question #1</h2>
          <p>You enjoy a nice cup of coffee first thing in the morning.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question1"
              id="question1option1"
              value="1"
            />
            <label class="form-check-label" for="question1option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question1"
              id="question1option2"
              value="2"
            />
            <label class="form-check-label" for="question1option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question1"
              id="question1option3"
              value="3"
            />
            <label class="form-check-label" for="question1option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question1"
              id="question1option4"
              value="4"
            />
            <label class="form-check-label" for="question1option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question1"
              id="question1option5"
              value="5"
            />
            <label class="form-check-label" for="question1option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 2 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question2heading">Question #2</h2>
          <p>Are you a dog person?</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question2"
              id="question2option1"
              value="1"
            />
            <label class="form-check-label" for="question2option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question2"
              id="question2option2"
              value="2"
            />
            <label class="form-check-label" for="question2option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question2"
              id="question2option3"
              value="3"
            />
            <label class="form-check-label" for="question2option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question2"
              id="question2option4"
              value="4"
            />
            <label class="form-check-label" for="question2option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question2"
              id="question2option5"
              value="5"
            />
            <label class="form-check-label" for="question2option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 3 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question3heading">Question #3</h2>
          <p>Do you like beans?</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question3"
              id="question3option1"
              value="1"
            />
            <label class="form-check-label" for="question3option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question3"
              id="question3option2"
              value="2"
            />
            <label class="form-check-label" for="question3option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question3"
              id="question3option3"
              value="3"
            />
            <label class="form-check-label" for="question3option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question3"
              id="question3option4"
              value="4"
            />
            <label class="form-check-label" for="question3option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question3"
              id="question3option5"
              value="5"
            />
            <label class="form-check-label" for="question3option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 4 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question4heading">Question #4</h2>
          <p>Do you like sleeping?</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question4"
              id="question4option1"
              value="1"
            />
            <label class="form-check-label" for="question4option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question4"
              id="question4option2"
              value="2"
            />
            <label class="form-check-label" for="question4option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question4"
              id="question4option3"
              value="3"
            />
            <label class="form-check-label" for="question4option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question4"
              id="question4option4"
              value="4"
            />
            <label class="form-check-label" for="question4option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question4"
              id="question4option5"
              value="5"
            />
            <label class="form-check-label" for="question4option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 5 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question5heading">Question #5</h2>
          <p>You are likely to eat too much pizza.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question5"
              id="question5option1"
              value="1"
            />
            <label class="form-check-label" for="question5option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question5"
              id="question5option2"
              value="2"
            />
            <label class="form-check-label" for="question5option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question5"
              id="question5option3"
              value="3"
            />
            <label class="form-check-label" for="question5option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question5"
              id="question5option4"
              value="4"
            />
            <label class="form-check-label" for="question5option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question5"
              id="question5option5"
              value="5"
            />
            <label class="form-check-label" for="question5option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 6 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question6heading">Question #6</h2>
          <p>
            When you watch TV, you often think "How do the people fit in such a
            small box?"
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question6"
              id="question6option1"
              value="1"
            />
            <label class="form-check-label" for="question6option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question6"
              id="question6option2"
              value="2"
            />
            <label class="form-check-label" for="question6option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question6"
              id="question6option3"
              value="3"
            />
            <label class="form-check-label" for="question6option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question6"
              id="question6option4"
              value="4"
            />
            <label class="form-check-label" for="question6option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question6"
              id="question6option5"
              value="5"
            />
            <label class="form-check-label" for="question6option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 7 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question7heading">Question #7</h2>
          <p>Despite others finding it obnoxious, you have a catchphrase.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question7"
              id="question7option1"
              value="1"
            />
            <label class="form-check-label" for="question7option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question7"
              id="question7option2"
              value="2"
            />
            <label class="form-check-label" for="question7option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question7"
              id="question7option3"
              value="3"
            />
            <label class="form-check-label" for="question7option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question7"
              id="question7option4"
              value="4"
            />
            <label class="form-check-label" for="question7option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question7"
              id="question7option5"
              value="5"
            />
            <label class="form-check-label" for="question7option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 8 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question8heading">Question #8</h2>
          <p>
            You enjoy using new technology solely to peel the little plastic
            sheets off.
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question8"
              id="question8option1"
              value="1"
            />
            <label class="form-check-label" for="question8option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question8"
              id="question8option2"
              value="2"
            />
            <label class="form-check-label" for="question8option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question8"
              id="question8option3"
              value="3"
            />
            <label class="form-check-label" for="question8option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question8"
              id="question8option4"
              value="4"
            />
            <label class="form-check-label" for="question8option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question8"
              id="question8option5"
              value="5"
            />
            <label class="form-check-label" for="question8option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 9 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question9heading">Question #9</h2>
          <p>You recently find yourself sighing when reading the news.</p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question9"
              id="question9option1"
              value="1"
            />
            <label class="form-check-label" for="question9option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question9"
              id="question9option2"
              value="2"
            />
            <label class="form-check-label" for="question9option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question9"
              id="question9option3"
              value="3"
            />
            <label class="form-check-label" for="question9option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question9"
              id="question9option4"
              value="4"
            />
            <label class="form-check-label" for="question9option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question9"
              id="question9option5"
              value="5"
            />
            <label class="form-check-label" for="question9option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <!-- QUESTION 10 -->
      <div class="row pt-2">
        <div class="col-md-12">
          <h2 id="question10heading">Question #10</h2>
          <p>
            When in conversation and you don't hear what the other person says,
            you're more likely to chuckle and nod than to say "Say that again,
            please."
          </p>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question10"
              id="question10option1"
              value="1"
            />
            <label class="form-check-label" for="question10option1">1</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question10"
              id="question10option2"
              value="2"
            />
            <label class="form-check-label" for="question10option2">2</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question10"
              id="question10option3"
              value="3"
            />
            <label class="form-check-label" for="question10option3">3</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question10"
              id="question10option4"
              value="4"
            />
            <label class="form-check-label" for="question10option4">4</label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="question10"
              id="question10option5"
              value="5"
            />
            <label class="form-check-label" for="question10option5">5</label>
          </div>
          <p class="font-italic" style="font-size:0.75rem">
            <span class="pr-5 mr-4">Disagree</span
            ><span class="pl-5">Agree</span>
          </p>
        </div>
      </div>
      <div class="row pt-5">
        <div class="col-md-6">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="nameInput">Name</span>
            </div>
            <input
              type="text"
              maxlength="20"
              class="form-control"
              id="nameTextInput"
              aria-label="Sizing example input"
              aria-describedby="nameInput"
            />
          </div>
        </div>
        <div class="col-md-6">
          <div class="input-group mb-3">
            <div class="input-group-prepend">
              <span class="input-group-text" id="photoInput">Photo (URL)</span>
            </div>
            <input
              type="text"
              class="form-control"
              id="photoTextInput"
              aria-label="Sizing example input"
              aria-describedby="photoInput"
            />
          </div>
        </div>
      </div>
      <div class="row pt-1">
        <div class="col-md-12">
          <button
            type="button"
            class="btn btn-primary btn-lg"
            id="submit-choices"
          >
            Submit Choices
          </button>
        </div>
      </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="matchModal" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h4 class="modal-title">Friend Match!</h4>
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <p id="match-name"></p>
            <img
              id="match-photo"
              src=""
              alt="Photo of friend match"
              style="width: 100%;"
            />
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
  <script>
    $("#photoFileInput").change(function() {
      var file = $("#photoFileInput")[0].files[0].name;
      $("#photoLabel").text(file);
      $("#photoLabel").addClass("font-italic");
    });

    var questions = [
      $("#question1heading"),
      $("#question2heading"),
      $("#question3heading"),
      $("#question4heading"),
      $("#question5heading"),
      $("#question6heading"),
      $("#question7heading"),
      $("#question8heading"),
      $("#question9heading"),
      $("#question10heading")
    ];
    $("#submit-choices").click(function() {
      var choiceValues = [
        parseInt($("input[name=question1]:checked").val()),
        parseInt($("input[name=question2]:checked").val()),
        parseInt($("input[name=question3]:checked").val()),
        parseInt($("input[name=question4]:checked").val()),
        parseInt($("input[name=question5]:checked").val()),
        parseInt($("input[name=question6]:checked").val()),
        parseInt($("input[name=question7]:checked").val()),
        parseInt($("input[name=question8]:checked").val()),
        parseInt($("input[name=question9]:checked").val()),
        parseInt($("input[name=question10]:checked").val())
      ];
      var incomplete = false;
      var noName = false;
      var noImage = false;
      var alertMessage = "";

      if (!$("input[id=photoTextInput]").val()) {
        incomplete = true;
        alertMessage = "Select a photo to continue!";
      }

      if (!$("input[id=nameTextInput]").val()) {
        incomplete = true;
        alertMessage = "Enter your name!";
      }

      for (var i = 0; i < choiceValues.length; i++) {
        questions[i].removeClass("text-danger");
        if (isNaN(choiceValues[i])) {
          incomplete = true;
          questions[i].addClass("text-danger");
          alertMessage = "Please answer all questions!";
        }
      }

      if (incomplete) {
        alert(alertMessage);
      } else {
        var userObject = {
          name: $("input[id=nameTextInput]")
            .val()
            .trim(),
          photo: $("input[id=photoTextInput]")
            .val()
            .trim(),
          scores: choiceValues
        };

        var dataVerified = false;
        var imageArray = userObject.photo.split(".");
        var imageExtension = imageArray.slice(
          imageArray.length - 1,
          imageArray.length
        );
        console.log(imageExtension);

        if (Object.keys(userObject).length === 3) {
          if (userObject.name.length <= 20) {
            if (userObject.scores.length === 10) {
              if (
                userObject.scores.every(function(num) {
                  return !isNaN(num);
                })
              )
                dataVerified = true;
            }
          }
        }

        if (dataVerified) {
          var dataToSend = {
            newData: JSON.stringify(userObject)
          };
          $.post("/api/friends", dataToSend).then(function(data) {
            var matchData = JSON.parse(data);
            console.log("Friend match: ");
            console.log(matchData);
            $("#match-name").text(matchData.name);
            $("#match-photo").attr("src", matchData.photo);
            $("#matchModal").modal();
          });
        }
      }
    });

    function verifyArray(num) {
      return !isNaN(num);
    }
  </script>
</html>
